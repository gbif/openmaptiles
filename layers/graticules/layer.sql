
-- Northern Hemisphere
-- 45°
-- Arctic Circle (66°33′46.7″)

DROP TABLE IF EXISTS graticules;
CREATE TABLE graticules AS
    SELECT name, geometry
        FROM (SELECT 'Northern Hemisphere' AS name, ((ST_Transform((ST_GeomFromEWKT('SRID=4326;POLYGON((-180 0,180 0,179 0,178 0,177 0,176 0,175 0,174 0,173 0,172 0,171 0,170 0,169 0,168 0,167 0,166 0,165 0,164 0,163 0,162 0,161 0,160 0,159 0,158 0,157 0,156 0,155 0,154 0,153 0,152 0,151 0,150 0,149 0,148 0,147 0,146 0,145 0,144 0,143 0,142 0,141 0,140 0,139 0,138 0,137 0,136 0,135 0,134 0,133 0,132 0,131 0,130 0,129 0,128 0,127 0,126 0,125 0,124 0,123 0,122 0,121 0,120 0,119 0,118 0,117 0,116 0,115 0,114 0,113 0,112 0,111 0,110 0,109 0,108 0,107 0,106 0,105 0,104 0,103 0,102 0,101 0,100 0,99 0,98 0,97 0,96 0,95 0,94 0,93 0,92 0,91 0,90 0,89 0,88 0,87 0,86 0,85 0,84 0,83 0,82 0,81 0,80 0,79 0,78 0,77 0,76 0,75 0,74 0,73 0,72 0,71 0,70 0,69 0,68 0,67 0,66 0,65 0,64 0,63 0,62 0,61 0,60 0,59 0,58 0,57 0,56 0,55 0,54 0,53 0,52 0,51 0,50 0,49 0,48 0,47 0,46 0,45 0,44 0,43 0,42 0,41 0,40 0,39 0,38 0,37 0,36 0,35 0,34 0,33 0,32 0,31 0,30 0,29 0,28 0,27 0,26 0,25 0,24 0,23 0,22 0,21 0,20 0,19 0,18 0,17 0,16 0,15 0,14 0,13 0,12 0,11 0,10 0,9 0,8 0,7 0,6 0,5 0,4 0,3 0,2 0,1 0,0 0,-1 0,-2 0,-3 0,-4 0,-5 0,-6 0,-7 0,-8 0,-9 0,-10 0,-11 0,-12 0,-13 0,-14 0,-15 0,-16 0,-17 0,-18 0,-19 0,-20 0,-21 0,-22 0,-23 0,-24 0,-25 0,-26 0,-27 0,-28 0,-29 0,-30 0,-31 0,-32 0,-33 0,-34 0,-35 0,-36 0,-37 0,-38 0,-39 0,-40 0,-41 0,-42 0,-43 0,-44 0,-45 0,-46 0,-47 0,-48 0,-49 0,-50 0,-51 0,-52 0,-53 0,-54 0,-55 0,-56 0,-57 0,-58 0,-59 0,-60 0,-61 0,-62 0,-63 0,-64 0,-65 0,-66 0,-67 0,-68 0,-69 0,-70 0,-71 0,-72 0,-73 0,-74 0,-75 0,-76 0,-77 0,-78 0,-79 0,-80 0,-81 0,-82 0,-83 0,-84 0,-85 0,-86 0,-87 0,-88 0,-89 0,-90 0,-91 0,-92 0,-93 0,-94 0,-95 0,-96 0,-97 0,-98 0,-99 0,-100 0,-101 0,-102 0,-103 0,-104 0,-105 0,-106 0,-107 0,-108 0,-109 0,-110 0,-111 0,-112 0,-113 0,-114 0,-115 0,-116 0,-117 0,-118 0,-119 0,-120 0,-121 0,-122 0,-123 0,-124 0,-125 0,-126 0,-127 0,-128 0,-129 0,-130 0,-131 0,-132 0,-133 0,-134 0,-135 0,-136 0,-137 0,-138 0,-139 0,-140 0,-141 0,-142 0,-143 0,-144 0,-145 0,-146 0,-147 0,-148 0,-149 0,-150 0,-151 0,-152 0,-153 0,-154 0,-155 0,-156 0,-157 0,-158 0,-159 0,-160 0,-161 0,-162 0,-163 0,-164 0,-165 0,-166 0,-167 0,-168 0,-169 0,-170 0,-171 0,-172 0,-173 0,-174 0,-175 0,-176 0,-177 0,-178 0,-179 0,-180 0))')), 3575))) AS geometry
        UNION SELECT '45°N' AS name, ((ST_Transform((ST_GeomFromEWKT('SRID=4326;LINESTRING(180 45,178 45,176 45,174 45,172 45,170 45,168 45,166 45,164 45,162 45,160 45,158 45,156 45,154 45,152 45,150 45,148 45,146 45,144 45,142 45,140 45,138 45,136 45,134 45,132 45,130 45,128 45,126 45,124 45,122 45,120 45,118 45,116 45,114 45,112 45,110 45,108 45,106 45,104 45,102 45,100 45,98 45,96 45,94 45,92 45,90 45,88 45,86 45,84 45,82 45,80 45,78 45,76 45,74 45,72 45,70 45,68 45,66 45,64 45,62 45,60 45,58 45,56 45,54 45,52 45,50 45,48 45,46 45,44 45,42 45,40 45,38 45,36 45,34 45,32 45,30 45,28 45,26 45,24 45,22 45,20 45,18 45,16 45,14 45,12 45,10 45,8 45,6 45,4 45,2 45,0 45,-2 45,-4 45,-6 45,-8 45,-10 45,-12 45,-14 45,-16 45,-18 45,-20 45,-22 45,-24 45,-26 45,-28 45,-30 45,-32 45,-34 45,-36 45,-38 45,-40 45,-42 45,-44 45,-46 45,-48 45,-50 45,-52 45,-54 45,-56 45,-58 45,-60 45,-62 45,-64 45,-66 45,-68 45,-70 45,-72 45,-74 45,-76 45,-78 45,-80 45,-82 45,-84 45,-86 45,-88 45,-90 45,-92 45,-94 45,-96 45,-98 45,-100 45,-102 45,-104 45,-106 45,-108 45,-110 45,-112 45,-114 45,-116 45,-118 45,-120 45,-122 45,-124 45,-126 45,-128 45,-130 45,-132 45,-134 45,-136 45,-138 45,-140 45,-142 45,-144 45,-146 45,-148 45,-150 45,-152 45,-154 45,-156 45,-158 45,-160 45,-162 45,-164 45,-166 45,-168 45,-170 45,-172 45,-174 45,-176 45,-178 45,-180 45)')), 3575))) AS geometry
        UNION SELECT 'Arctic Circle' AS name, ((ST_Transform((ST_GeomFromEWKT('SRID=4326;LINESTRING(180 66.562972,178 66.562972,176 66.562972,174 66.562972,172 66.562972,170 66.562972,168 66.562972,166 66.562972,164 66.562972,162 66.562972,160 66.562972,158 66.562972,156 66.562972,154 66.562972,152 66.562972,150 66.562972,148 66.562972,146 66.562972,144 66.562972,142 66.562972,140 66.562972,138 66.562972,136 66.562972,134 66.562972,132 66.562972,130 66.562972,128 66.562972,126 66.562972,124 66.562972,122 66.562972,120 66.562972,118 66.562972,116 66.562972,114 66.562972,112 66.562972,110 66.562972,108 66.562972,106 66.562972,104 66.562972,102 66.562972,100 66.562972,98 66.562972,96 66.562972,94 66.562972,92 66.562972,90 66.562972,88 66.562972,86 66.562972,84 66.562972,82 66.562972,80 66.562972,78 66.562972,76 66.562972,74 66.562972,72 66.562972,70 66.562972,68 66.562972,66 66.562972,64 66.562972,62 66.562972,60 66.562972,58 66.562972,56 66.562972,54 66.562972,52 66.562972,50 66.562972,48 66.562972,46 66.562972,44 66.562972,42 66.562972,40 66.562972,38 66.562972,36 66.562972,34 66.562972,32 66.562972,30 66.562972,28 66.562972,26 66.562972,24 66.562972,22 66.562972,20 66.562972,18 66.562972,16 66.562972,14 66.562972,12 66.562972,10 66.562972,8 66.562972,6 66.562972,4 66.562972,2 66.562972,0 66.562972,-2 66.562972,-4 66.562972,-6 66.562972,-8 66.562972,-10 66.562972,-12 66.562972,-14 66.562972,-16 66.562972,-18 66.562972,-20 66.562972,-22 66.562972,-24 66.562972,-26 66.562972,-28 66.562972,-30 66.562972,-32 66.562972,-34 66.562972,-36 66.562972,-38 66.562972,-40 66.562972,-42 66.562972,-44 66.562972,-46 66.562972,-48 66.562972,-50 66.562972,-52 66.562972,-54 66.562972,-56 66.562972,-58 66.562972,-60 66.562972,-62 66.562972,-64 66.562972,-66 66.562972,-68 66.562972,-70 66.562972,-72 66.562972,-74 66.562972,-76 66.562972,-78 66.562972,-80 66.562972,-82 66.562972,-84 66.562972,-86 66.562972,-88 66.562972,-90 66.562972,-92 66.562972,-94 66.562972,-96 66.562972,-98 66.562972,-100 66.562972,-102 66.562972,-104 66.562972,-106 66.562972,-108 66.562972,-110 66.562972,-112 66.562972,-114 66.562972,-116 66.562972,-118 66.562972,-120 66.562972,-122 66.562972,-124 66.562972,-126 66.562972,-128 66.562972,-130 66.562972,-132 66.562972,-134 66.562972,-136 66.562972,-138 66.562972,-140 66.562972,-142 66.562972,-144 66.562972,-146 66.562972,-148 66.562972,-150 66.562972,-152 66.562972,-154 66.562972,-156 66.562972,-158 66.562972,-160 66.562972,-162 66.562972,-164 66.562972,-166 66.562972,-168 66.562972,-170 66.562972,-172 66.562972,-174 66.562972,-176 66.562972,-178 66.562972,-180 66.562972)')), 3575))) AS geometry) AS x;

CREATE INDEX
    ON graticules
    USING GIST (geometry);

CREATE OR REPLACE FUNCTION layer_graticules_3575(bbox geometry)
RETURNS TABLE(geometry geometry, name text) AS $$
   SELECT geometry, name FROM graticules WHERE ST_Intersects(geometry, bbox);

$$ LANGUAGE SQL IMMUTABLE;
